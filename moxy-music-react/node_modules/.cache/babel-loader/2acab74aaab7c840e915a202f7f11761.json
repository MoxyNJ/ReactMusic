{"ast":null,"code":"import React,{useEffect,useRef,memo}from\"react\";import{useSelector,useDispatch,shallowEqual}from\"react-redux\";import classnames from\"classnames\";import{DJ_RADIO_CATE_NUMBER}from\"@/common/contants\";import{getRadioCategories,changeCurrentIdAction}from\"../../store/actionCreators\";import{Carousel}from\"antd\";import{CategoryWrapper,CategoryContent,CategoryItemImage}from\"./style\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default/*#__PURE__*/memo(function LJRadioCategory(){// redux hooks\nvar dispatch=useDispatch();var _useSelector=useSelector(function(state){return{categories:state.getIn([\"djRadio\",\"categories\"]),currentId:state.getIn([\"djRadio\",\"currentId\"])};},shallowEqual),_useSelector$categori=_useSelector.categories,categories=_useSelector$categori===void 0?[]:_useSelector$categori,_useSelector$currentI=_useSelector.currentId,currentId=_useSelector$currentI===void 0?0:_useSelector$currentI;// react hooks\nuseEffect(function(){dispatch(getRadioCategories());},[dispatch]);var carouselRef=useRef();// handle function\n// 计算出共有几页，每页应当有18个类目\n// ceil 向下取整\nvar page=Math.ceil(categories.length/DJ_RADIO_CATE_NUMBER)||1;return/*#__PURE__*/_jsxs(CategoryWrapper,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"arrow arrow-left\",onClick:function onClick(e){return carouselRef.current.prev();}}),/*#__PURE__*/_jsx(CategoryContent,{children:/*#__PURE__*/_jsx(Carousel,{dots:{className:\"dots\"},ref:carouselRef,children:Array(page).fill(0).map(function(_,index){return/*#__PURE__*/_jsx(\"div\",{className:\"category-page\",children:categories.slice(index*DJ_RADIO_CATE_NUMBER,index===0?18:categories.length).map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(e){return dispatch(changeCurrentIdAction(item.id));},className:classnames(\"category-item\",{active:currentId===item.id}),children:[/*#__PURE__*/_jsx(CategoryItemImage,{className:\"image\",imgUrl:item.picWebUrl}),/*#__PURE__*/_jsx(\"span\",{children:item.name})]},item.id);})},index);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"arrow arrow-right\",onClick:function onClick(e){return carouselRef.current.next();}})]});});","map":{"version":3,"sources":["/Users/moxy/ReactTea/moxy-music-react/src/pages/discover/c-pages/djradio/c-cpns/radio-category/index.js"],"names":["React","useEffect","useRef","memo","useSelector","useDispatch","shallowEqual","classnames","DJ_RADIO_CATE_NUMBER","getRadioCategories","changeCurrentIdAction","Carousel","CategoryWrapper","CategoryContent","CategoryItemImage","LJRadioCategory","dispatch","state","categories","getIn","currentId","carouselRef","page","Math","ceil","length","e","current","prev","className","Array","fill","map","_","index","slice","item","id","active","picWebUrl","name","next"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,MAA3B,CAAmCC,IAAnC,KAA+C,OAA/C,CACA,OAASC,WAAT,CAAsBC,WAAtB,CAAmCC,YAAnC,KAAuD,aAAvD,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CAEA,OAASC,oBAAT,KAAqC,mBAArC,CACA,OACEC,kBADF,CAEEC,qBAFF,KAGO,4BAHP,CAKA,OAASC,QAAT,KAAyB,MAAzB,CACA,OAASC,eAAT,CAA0BC,eAA1B,CAA2CC,iBAA3C,KAAoE,SAApE,C,wFAEA,2BAAeX,IAAI,CAAC,QAASY,CAAAA,eAAT,EAA2B,CAC7C;AACA,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CAF6C,iBAGFD,WAAW,CACpD,SAACa,KAAD,QAAY,CACVC,UAAU,CAAED,KAAK,CAACE,KAAN,CAAY,CAAC,SAAD,CAAY,YAAZ,CAAZ,CADF,CAEVC,SAAS,CAAEH,KAAK,CAACE,KAAN,CAAY,CAAC,SAAD,CAAY,WAAZ,CAAZ,CAFD,CAAZ,EADoD,CAKpDb,YALoD,CAHT,oCAGrCY,UAHqC,CAGrCA,UAHqC,gCAGxB,EAHwB,0DAGpBE,SAHoB,CAGpBA,SAHoB,gCAGR,CAHQ,uBAW7C;AACAnB,SAAS,CAAC,UAAM,CACde,QAAQ,CAACP,kBAAkB,EAAnB,CAAR,CACD,CAFQ,CAEN,CAACO,QAAD,CAFM,CAAT,CAGA,GAAMK,CAAAA,WAAW,CAAGnB,MAAM,EAA1B,CAEA;AAEA;AACA;AACA,GAAMoB,CAAAA,IAAI,CAAGC,IAAI,CAACC,IAAL,CAAUN,UAAU,CAACO,MAAX,CAAoBjB,oBAA9B,GAAuD,CAApE,CAEA,mBACE,MAAC,eAAD,yBACE,YACE,SAAS,CAAC,kBADZ,CAEE,OAAO,CAAE,iBAACkB,CAAD,QAAOL,CAAAA,WAAW,CAACM,OAAZ,CAAoBC,IAApB,EAAP,EAFX,EADF,cAKE,KAAC,eAAD,wBACE,KAAC,QAAD,EAAU,IAAI,CAAE,CAAEC,SAAS,CAAE,MAAb,CAAhB,CAAuC,GAAG,CAAER,WAA5C,UACGS,KAAK,CAACR,IAAD,CAAL,CACES,IADF,CACO,CADP,EAEEC,GAFF,CAEM,SAACC,CAAD,CAAIC,KAAJ,CAAc,CACjB,mBACE,YAAiB,SAAS,CAAC,eAA3B,UAEGhB,UAAU,CACRiB,KADF,CAEGD,KAAK,CAAG1B,oBAFX,CAGG0B,KAAK,GAAK,CAAV,CAAc,EAAd,CAAmBhB,UAAU,CAACO,MAHjC,EAKEO,GALF,CAKM,SAACI,IAAD,CAAOF,KAAP,CAAiB,CACpB,mBACE,aAEE,OAAO,CAAE,iBAACR,CAAD,QACPV,CAAAA,QAAQ,CAACN,qBAAqB,CAAC0B,IAAI,CAACC,EAAN,CAAtB,CADD,EAFX,CAKE,SAAS,CAAE9B,UAAU,CAAC,eAAD,CAAkB,CACrC+B,MAAM,CAAElB,SAAS,GAAKgB,IAAI,CAACC,EADU,CAAlB,CALvB,wBASE,KAAC,iBAAD,EACE,SAAS,CAAC,OADZ,CAEE,MAAM,CAAED,IAAI,CAACG,SAFf,EATF,cAaE,sBAAOH,IAAI,CAACI,IAAZ,EAbF,GACOJ,IAAI,CAACC,EADZ,CADF,CAiBD,CAvBF,CAFH,EAAUH,KAAV,CADF,CA6BD,CAhCF,CADH,EADF,EALF,cA0CE,YACE,SAAS,CAAC,mBADZ,CAEE,OAAO,CAAE,iBAACR,CAAD,QAAOL,CAAAA,WAAW,CAACM,OAAZ,CAAoBc,IAApB,EAAP,EAFX,EA1CF,GADF,CAiDD,CAxEkB,CAAnB","sourcesContent":["import React, { useEffect, useRef, memo } from \"react\";\nimport { useSelector, useDispatch, shallowEqual } from \"react-redux\";\nimport classnames from \"classnames\";\n\nimport { DJ_RADIO_CATE_NUMBER } from \"@/common/contants\";\nimport {\n  getRadioCategories,\n  changeCurrentIdAction,\n} from \"../../store/actionCreators\";\n\nimport { Carousel } from \"antd\";\nimport { CategoryWrapper, CategoryContent, CategoryItemImage } from \"./style\";\n\nexport default memo(function LJRadioCategory() {\n  // redux hooks\n  const dispatch = useDispatch();\n  const { categories = [], currentId = 0 } = useSelector(\n    (state) => ({\n      categories: state.getIn([\"djRadio\", \"categories\"]),\n      currentId: state.getIn([\"djRadio\", \"currentId\"]),\n    }),\n    shallowEqual\n  );\n\n  // react hooks\n  useEffect(() => {\n    dispatch(getRadioCategories());\n  }, [dispatch]);\n  const carouselRef = useRef();\n\n  // handle function\n\n  // 计算出共有几页，每页应当有18个类目\n  // ceil 向下取整\n  const page = Math.ceil(categories.length / DJ_RADIO_CATE_NUMBER) || 1;\n\n  return (\n    <CategoryWrapper>\n      <div\n        className=\"arrow arrow-left\"\n        onClick={(e) => carouselRef.current.prev()}\n      ></div>\n      <CategoryContent>\n        <Carousel dots={{ className: \"dots\" }} ref={carouselRef}>\n          {Array(page)\n            .fill(0)\n            .map((_, index) => {\n              return (\n                <div key={index} className=\"category-page\">\n                  {/* slice: 0,18 , 18,length */}\n                  {categories\n                    .slice(\n                      index * DJ_RADIO_CATE_NUMBER,\n                      index === 0 ? 18 : categories.length\n                    )\n                    .map((item, index) => {\n                      return (\n                        <div\n                          key={item.id}\n                          onClick={(e) =>\n                            dispatch(changeCurrentIdAction(item.id))\n                          }\n                          className={classnames(\"category-item\", {\n                            active: currentId === item.id,\n                          })}\n                        >\n                          <CategoryItemImage\n                            className=\"image\"\n                            imgUrl={item.picWebUrl}\n                          ></CategoryItemImage>\n                          <span>{item.name}</span>\n                        </div>\n                      );\n                    })}\n                </div>\n              );\n            })}\n        </Carousel>\n      </CategoryContent>\n      <div\n        className=\"arrow arrow-right\"\n        onClick={(e) => carouselRef.current.next()}\n      ></div>\n    </CategoryWrapper>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}