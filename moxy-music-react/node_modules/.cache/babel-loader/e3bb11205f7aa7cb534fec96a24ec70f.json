{"ast":null,"code":"import*as actionTypes from\"./constants\";import{PER_PAGE_NUMBER}from\"@/common/contants\";import{getHotAlbums,getTopAlbums}from\"@/services/album.js\";// 内部\nvar changeHotAlbumsAction=function changeHotAlbumsAction(res){return{type:actionTypes.CHANGE_HOT_ALBUMS,hotAlbums:res.albums};};var changeTopAlbumAction=function changeTopAlbumAction(res){return{type:actionTypes.CHANGE_TOP_ALBUMS,topAlbums:res.albums};};var changeTopTotalAction=function changeTopTotalAction(total){return{type:actionTypes.CHANGE_TOP_TOTAL,total:total};};export var changeTopAreaAction=function changeTopAreaAction(area){return{type:actionTypes.CHANGE_TOP_AREA,area:area};};// 异步action\n// 获得热门新碟数据\nexport var getHotAlbumsAction=function getHotAlbumsAction(){return function(dispatch){getHotAlbums().then(function(res){dispatch(changeHotAlbumsAction(res));});};};// 获得全部新碟数据\n// page - 1\nexport var getTopAlbumsAction=function getTopAlbumsAction(page){return function(dispatch,getState){// 获取 专辑地区\nvar area=getState().getIn([\"album\",\"topArea\"]);getTopAlbums(area,30,(page-1)*PER_PAGE_NUMBER).then(function(res){dispatch(changeTopAlbumAction(res));dispatch(changeTopTotalAction(res.total));});};};","map":{"version":3,"sources":["/Users/moxy/ReactTea/moxy-music-react/src/pages/discover/c-pages/album/store/actionCreators.js"],"names":["actionTypes","PER_PAGE_NUMBER","getHotAlbums","getTopAlbums","changeHotAlbumsAction","res","type","CHANGE_HOT_ALBUMS","hotAlbums","albums","changeTopAlbumAction","CHANGE_TOP_ALBUMS","topAlbums","changeTopTotalAction","total","CHANGE_TOP_TOTAL","changeTopAreaAction","area","CHANGE_TOP_AREA","getHotAlbumsAction","dispatch","then","getTopAlbumsAction","page","getState","getIn"],"mappings":"AAAA,MAAO,GAAKA,CAAAA,WAAZ,KAA6B,aAA7B,CACA,OAASC,eAAT,KAAgC,mBAAhC,CAEA,OAASC,YAAT,CAAuBC,YAAvB,KAA2C,qBAA3C,CAEA;AACA,GAAMC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACC,GAAD,QAAU,CACtCC,IAAI,CAAEN,WAAW,CAACO,iBADoB,CAEtCC,SAAS,CAAEH,GAAG,CAACI,MAFuB,CAAV,EAA9B,CAKA,GAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACL,GAAD,QAAU,CACrCC,IAAI,CAAEN,WAAW,CAACW,iBADmB,CAErCC,SAAS,CAAEP,GAAG,CAACI,MAFsB,CAAV,EAA7B,CAKA,GAAMI,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACC,KAAD,QAAY,CACvCR,IAAI,CAAEN,WAAW,CAACe,gBADqB,CAEvCD,KAAK,CAAEA,KAFgC,CAAZ,EAA7B,CAKA,MAAO,IAAME,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,IAAD,QAAW,CAC5CX,IAAI,CAAEN,WAAW,CAACkB,eAD0B,CAE5CD,IAAI,CAAEA,IAFsC,CAAX,EAA5B,CAIP;AACA;AACA,MAAO,IAAME,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CACtC,MAAO,UAACC,QAAD,CAAc,CACnBlB,YAAY,GAAGmB,IAAf,CAAoB,SAAChB,GAAD,CAAS,CAC3Be,QAAQ,CAAChB,qBAAqB,CAACC,GAAD,CAAtB,CAAR,CACD,CAFD,EAGD,CAJD,CAKD,CANM,CAQP;AACA;AACA,MAAO,IAAMiB,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,IAAD,CAAU,CAC1C,MAAO,UAACH,QAAD,CAAWI,QAAX,CAAwB,CAC7B;AACA,GAAMP,CAAAA,IAAI,CAAGO,QAAQ,GAAGC,KAAX,CAAiB,CAAC,OAAD,CAAU,SAAV,CAAjB,CAAb,CACAtB,YAAY,CAACc,IAAD,CAAO,EAAP,CAAW,CAACM,IAAI,CAAG,CAAR,EAAatB,eAAxB,CAAZ,CAAqDoB,IAArD,CAA0D,SAAChB,GAAD,CAAS,CACjEe,QAAQ,CAACV,oBAAoB,CAACL,GAAD,CAArB,CAAR,CACAe,QAAQ,CAACP,oBAAoB,CAACR,GAAG,CAACS,KAAL,CAArB,CAAR,CACD,CAHD,EAID,CAPD,CAQD,CATM","sourcesContent":["import * as actionTypes from \"./constants\";\nimport { PER_PAGE_NUMBER } from \"@/common/contants\";\n\nimport { getHotAlbums, getTopAlbums } from \"@/services/album.js\";\n\n// 内部\nconst changeHotAlbumsAction = (res) => ({\n  type: actionTypes.CHANGE_HOT_ALBUMS,\n  hotAlbums: res.albums,\n});\n\nconst changeTopAlbumAction = (res) => ({\n  type: actionTypes.CHANGE_TOP_ALBUMS,\n  topAlbums: res.albums,\n});\n\nconst changeTopTotalAction = (total) => ({\n  type: actionTypes.CHANGE_TOP_TOTAL,\n  total: total,\n});\n\nexport const changeTopAreaAction = (area) => ({\n  type: actionTypes.CHANGE_TOP_AREA,\n  area: area,\n});\n// 异步action\n// 获得热门新碟数据\nexport const getHotAlbumsAction = () => {\n  return (dispatch) => {\n    getHotAlbums().then((res) => {\n      dispatch(changeHotAlbumsAction(res));\n    });\n  };\n};\n\n// 获得全部新碟数据\n// page - 1\nexport const getTopAlbumsAction = (page) => {\n  return (dispatch, getState) => {\n    // 获取 专辑地区\n    const area = getState().getIn([\"album\", \"topArea\"]);\n    getTopAlbums(area, 30, (page - 1) * PER_PAGE_NUMBER).then((res) => {\n      dispatch(changeTopAlbumAction(res));\n      dispatch(changeTopTotalAction(res.total));\n    });\n  };\n};\n"]},"metadata":{},"sourceType":"module"}